
INCLUDE(MakeFileVal)

IF(${PACKAGE_NAME}_ENABLE_SHARED)
  SET( MESQUITE_LIB_DEFINES "${MESQUITE_DEFINES} -DMESQUITE_DLL_EXPORTS" )
ELSE()
  SET( MESQUITE_LIB_DEFINES "${MESQUITE_DEFINES} -DMESQUITE_STATIC_LIB" )
ENDIF()

IF(IMESH_DEFS)
  SET(${PACKAGE_NAME}_ENABLE_IMESH ON)
  MAKEFILE_VAL(${IMESH_DEFS} IMESH_LIBS IMESH_LIBS)
  MAKEFILE_VAL(${IMESH_DEFS} IMESH_INCLUDES IMESH_INCL)
  TRIBITS_ADD_LIBRARY(msqimesh HEADERS MsqIMesh.hpp SOURCES MsqIMesh.cpp)
  SET_SOURCE_FILES_PROPERTIES( MsqIMesh.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
ELSE(IMESH_DEFS)
  SET(${PACKAGE_NAME}_ENABLE_IMESH OFF)
ENDIF(IMESH_DEFS)

IF(IGEOM_DEFS)
  MAKEFILE_VAL(${IGEOM_DEFS} IGEOM_LIBS IGEOM_LIBS)
  MAKEFILE_VAL(${IGEOM_DEFS} IGEOM_INCLUDES IGEOM_INCL)
  TRIBITS_ADD_LIBRARY(msqigeom HEADERS MsqIGeom.hpp SOURCES MsqIGeom.cpp)
  SET_SOURCE_FILES_PROPERTIES( MsqIGeom.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
ENDIF(IGEOM_DEFS)

IF(IREL_DEFS)
  MAKEFILE_VAL(${IREL_DEFS} IREL_LIBS IREL_LIBS)
  MAKEFILE_VAL(${IREL_DEFS} IREL_INCLUDES IREL_INCL)
  TRIBITS_ADD_LIBRARY(msqirel HEADERS MsqIRel.hpp SOURCES MsqIRel.cpp)
  SET_SOURCE_FILES_PROPERTIES( MsqIRel.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
ENDIF(IREL_DEFS)

IF (TPL_ENABLE_MPI)
  IF(IMESHP_DEFS)
    MAKEFILE_VAL(${IMESHP_DEFS} IMESHP_LIBS IMESHP_LIBS)
    MAKEFILE_VAL(${IMESHP_DEFS} IMESHP_INCLUDES IMESHP_INCL)
    TRIBITS_ADD_LIBRARY(msqimeshp HEADERS MsqIMeshP.hpp SOURCES MsqIMeshP.cpp)
    SET_SOURCE_FILES_PROPERTIES( MsqIMeshP.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
  ENDIF(IMESHP_DEFS)
ENDIF()

