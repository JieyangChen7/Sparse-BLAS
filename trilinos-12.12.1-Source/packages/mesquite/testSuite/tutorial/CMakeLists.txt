SET( INDIR "${CMAKE_CURRENT_SOURCE_DIR}/../../meshFiles/2D/vtk" )
IF (NOT ${PROJECT_NAME} STREQUAL "Mesquite")
  TRIBITS_ADD_EXECUTABLE( tutorial SOURCES tutorial.cpp )
  TRIBITS_ADD_EXECUTABLE( wrapper  SOURCES wrapper.cpp  )
  TRIBITS_ADD_EXECUTABLE( lowlevel SOURCES lowlevel.cpp )
  TRIBITS_ADD_TEST( tutorial NAME tutorial ARGS ${INDIR}/quads/tangled/hole_in_square.vtk NUM_MPI_PROCS 1 )
  TRIBITS_ADD_TEST( wrapper  NAME wrapper  ARGS ${INDIR}/quads/untangled/square_quad_10_rand.vtk NUM_MPI_PROCS 1 )
  TRIBITS_ADD_TEST( lowlevel NAME lowlevel ARGS ${INDIR}/quads/tangled/hole_in_square.vtk NUM_MPI_PROCS 1 )
#  TARGET_LINK_LIBRARIES( tutorial mesquite )
#  TARGET_LINK_LIBRARIES( wrapper  mesquite )
#  TARGET_LINK_LIBRARIES( lowlevel mesquite )
ELSE()
  IF (${PACKAGE_NAME}_ENABLE_TESTS)
    ADD_EXECUTABLE( tutorial tutorial.cpp )
    ADD_EXECUTABLE( wrapper  wrapper.cpp  )
    ADD_EXECUTABLE( lowlevel lowlevel.cpp )
    ADD_TEST( tutorial ${EXECUTABLE_OUTPUT_PATH}/tutorial ${INDIR}/quads/tangled/hole_in_square.vtk )
    ADD_TEST( wrapper  ${EXECUTABLE_OUTPUT_PATH}/wrapper ${INDIR}/quads/untangled/square_quad_10_rand.vtk )
    ADD_TEST( lowlevel ${EXECUTABLE_OUTPUT_PATH}/lowlevel ${INDIR}/quads/tangled/hole_in_square.vtk )
    TARGET_LINK_LIBRARIES( tutorial mesquite )
    TARGET_LINK_LIBRARIES( wrapper  mesquite )
    TARGET_LINK_LIBRARIES( lowlevel mesquite )
  ENDIF(${PACKAGE_NAME}_ENABLE_TESTS)
ENDIF()
SET_SOURCE_FILES_PROPERTIES(tutorial.cpp wrapper.cpp lowlevel.cpp COMPILE_FLAGS "-DSRCDIR=\"\\\"${CMAKE_CURRENT_SOURCE_DIR}/\\\"\" ${TEST_DEFINES}")
